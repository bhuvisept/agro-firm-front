<ngx-spinner class="cusSpinner">
  <div class="loader-wrapper">
      <div class="truck-wrapper">
      <div class="truck">
          <div class="truck-container"></div>
          <div class="glases"></div>
          <div class="bonet"></div>
          <div class="base"></div>
          <div class="base-aux"></div>
          <div class="wheel-back"></div>
          <div class="wheel-front"></div>
          <div class="smoke"></div>
      </div>
      </div>
  </div>
</ngx-spinner>
<section class="cus-e-commerce-mail">
  <div class="container-fluid">
    <div class="row p-0">
      <div class="col-sm-12 p-0">
        <app-e-commerce-header></app-e-commerce-header>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-2 p-0">
        <app-sidemenu></app-sidemenu>
      </div>
      <div class="col-sm-10 p-0">
        <div class="cus-main-section p-3">
          <div class="row pl-4 pr-4">
            <div class="col-sm-6 p-0">
              <div class="page-title-box">
                <h4 class="page-title"> {{ 'seller.qes_ans.Q&A' | translate }} </h4>
              </div>
            </div>
          </div>
          <div class="row mb-3 mt-3 pl-4 pr-4 cus-box-with-radio cus-wrap-pro">
             <div class="col-12">
               <div class="row">
                <div class="col-sm-2 pl-0 pl-sm-0 cus-search-input wt-100-on-mobile-flx">
                  <mat-form-field class="p-0 searchByCategory">
                    <div class="drop_down_design_active">
                      <mat-select  [(ngModel)]="isAnswered" class="p-0">
                          <mat-option *ngFor="let list of answerArray"  value="{{ list.value }}" >
                            {{ list.name }}
                          </mat-option>
                      </mat-select>
                    </div>
                </mat-form-field>
                </div>
                <div class="col-sm-3 p-0 mt-sm-2 mb-2 p-sm-0 ">
                  <div class="cus-search-input wt-100-on-mobile-flx mt-2 mt-sm-0">
                    <input autocomplete="off" [(ngModel)]="search" class="mat-input-element" matinput=""
                      placeholder="Search by product" id="mat-input-3" aria-invalid="false" aria-required="false">
                      <div class="cus-search-input wt-100-on-mobile-btn">
                        <button class="btn" type="button" (click)="questionsList(1)"><i class="fa fa-search"></i></button>
                        <button class="btn btn-res" label="Reset" title="Reset" (click)="reset()"> <i class="fa fa-refresh"
                        title="reset"></i></button>
                      </div>
                  </div>
                </div>
               </div>
             </div>
              <div class="col-sm-12 p-0">
                <table class="table">
                  <thead>
                    <tr>
                      <th scope="col">{{ 'seller.qes_ans.Product_Name' | translate }}</th>
                      <th scope="col">{{ 'seller.qes_ans.Person_Name' | translate }}</th>
                      <th scope="col">{{ 'seller.qes_ans.Question' | translate }}</th>
                      <th scope='col' style="text-align: center;">{{ 'seller.qes_ans.Action' | translate }}</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr
                      *ngFor="let list of questionList | paginate: { itemsPerPage: itemsPerPage, currentPage: page, totalItems: totalCount }; let i = index">
                      <td> <a
                          routerLink="/layout/e-commerce/product-view/{{list.productData._id}}">{{list.productData.productName | slice:0:30}}</a>
                      </td>
                      <td>{{list.customerData.personName | titlecase}}</td>
                      <td>{{list.question | slice:0:30}}</td>
                      <td style="display: flex;justify-content: center;">
                        <button class='btn e-comm-btn' *ngIf='!list.answer' [routerLink]='["/layout/e-commerce/answer-question/"+list._id]' title="Answer" ><i class="fas fa-edit"></i></button>
                        <button class='btn e-comm-btn' *ngIf='list.answer' id='open-diaLog-logo' data-toggle="modal" data-target="#logo-image-dialog" title="View answer" (click)='questionDetails(list._id)'><i class="fas fa-eye"></i></button>
                        &nbsp;
                        <button class='btn e-comm-btn'  (click)='deleteQuestion(list._id)' *ngIf='!list.answer' title="Delete"><i class="fa fa-trash" aria-hidden="true"></i> </button>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <div *ngIf="totalCount > itemsPerPage && noRecordFound" class="col-sm-12 text-center">
                  <pagination-controls (pageChange)="pageChanged($event)" responsive="true" directionLinks="true">
                  </pagination-controls>
                </div>
                <div *ngIf='!noRecordFound' class="col-sm-12 text-center">
                  <p> {{ 'No_Records_Found' | translate }} </p>
                </div>
              </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<div class="modal" id="logo-image-dialog">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-body ">
        <div class="col-sm-12">
          <div class='question'>
             <div class='mb-1'><strong>{{'QuestionAnswer.Question' | translate}}</strong> : </div>
              <span>
               <p> {{question?.question}}</p>
              </span>
          </div>
      </div>
          <div class="col-sm-12 mt-4">
              <mat-label><strong>{{'QuestionAnswer.Answer' | translate}}</strong> :</mat-label>
             <div>
              <p>{{question?.answer}}</p>
             </div>
          </div>
      </div>
      <div class='col-md-12 text-center mt-2 mb-2 text-right'>
        <button class='btn common-btn' data-dismiss="modal">{{'buttons.close' | translate}}</button>
      </div>
    </div>
  </div>
</div>
