<div *ngIf="viewPostForm == true">
  <form [formGroup]="editPostForm" class="cus-edit-post">
    <div class="modal-header">
      <h4 class="modal-title mfont">{{ 'myNetwork.Edit_post' | translate }}</h4>
      <button type="button" class="close cus-close-post" (click)="this.dialogRef.close()">&times;</button>
    </div>
    <div class="modal-body">
      <div class="row cus_pop_Profile">
        <span class="col-sm-2 col-xs-2 p-r-0">
          <div *ngIf="roleName == 'COMPANY'">
            <img *ngIf="!userObj.userInfo.image" src="assets/Truck-banne-profile.png" class="cus-round-with-img" />
            <img *ngIf="userObj.userInfo.image" src="{{ ENDuSER + userObj.userInfo.image }}"
              class="cus-round-with-img" />
          </div>
          <div *ngIf="roleName == 'ENDUSER'">
            <img *ngIf="!userObj.userInfo.image" src="assets/Truck-banne-profile.png" class="cus-round-with-img" />
            <img *ngIf="userObj.userInfo.image" src="{{ ENDuSER + userObj.userInfo.image }}"
              class="cus-round-with-img" />
          </div>
        </span>
        <span class="col-sm-6 col-xs-6 p-l-0">
          <h6 class="font-weight-bold pt-2">{{ data.userData?.personName }}</h6>
        </span>
      </div>
      <div class="col-sm-12 p-l-0 p-r-0 mt-3"><textarea matInput formControlName="caption" class="text-design" readonly
          style="height: 80px"></textarea></div>
      <div class="col-12 cus_height_post">
        <owl-carousel-o [options]="customOptions" class="cus-event-slider">
          <ng-template carouselSlide *ngFor="let img of filesImg">
            <div *ngIf="img.type == 'IMAGE'"><img src="{{ networkImages + img.name }}" /></div>
            <div *ngIf="img.type == 'VIDEO'"><video src="{{ postVideo_path + img.name }}" alt="" height="100%"
                width="100%" controls autoplay></video></div>
          </ng-template>
        </owl-carousel-o>
        <div class="d-flex justify-content-center align-items-center px-2 mt-1" *ngIf="isLoading==true">
          <mat-progress-bar class="example-margin" [color]="'primary'" [mode]="'indeterminate'"  #spinner>
          </mat-progress-bar>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <div class="col-sm-6 text-right p-l-0 p-r-0">
        <button (click)="viewPostForm = false; updatePostForm = true" class="btn common-btn">{{ 'buttons.update' | translate }}</button>
      </div>
    </div>
  </form>
</div>
<div *ngIf="updatePostForm == true">
  <form [formGroup]="editPostForm" (ngSubmit)="onSubmitEditPostForm()" class="cus-edit-post">
    <div class="modal-header">
      <h4 class="modal-title mfont">{{ 'myNetwork.Edit_post' | translate }}</h4>
      <button type="button" class="close cus-close-post" (click)="this.dialogRef.close()">&times;</button>
    </div>
    <div class="modal-body">
      <div class="row">
        <span class="col-sm-2 p-r-0">
          <div *ngIf="roleName == 'COMPANY'">
            <img *ngIf="!userObj.userInfo.image" src="assets/Truck-banne-profile.png" class="cus-round-with-img" />
            <img *ngIf="userObj.userInfo.image" src="{{ ENDuSER + userObj.userInfo.image }}"
              class="cus-round-with-img" />
          </div>
          <div *ngIf="roleName == 'ENDUSER'">
            <img *ngIf="!userObj.userInfo.image" src="assets/Truck-banne-profile.png" class="cus-round-with-img" />
            <img *ngIf="userObj.userInfo.image" src="{{ ENDuSER + userObj.userInfo.image }}"
              class="cus-round-with-img" />
          </div>
        </span>
        <span class="col-sm-6 p-l-0">
          <h6 class="font-weight-bold pt-2">{{ data.userData.personName }}</h6>
        </span>
      </div>
      <div class="mt-3"><textarea matInput formControlName="caption" class="text-design"
          placeholder="What do you want to talk about?" id="autoresizing"></textarea></div>
      <div>
        <div class="col-sm-12">
          <div class="position-relative cus_height_slide">
            <owl-carousel-o [options]="customOptions" class="cus-event-slider">
              <ng-template carouselSlide *ngFor="let img of filesImg; let i = index">
                <div
                  *ngIf="img.name.split('.').pop()=='jpg' || img.name.split('.').pop()=='png' || img.name.split('.').pop()=='gif' || img.name.split('.').pop()=='jpeg'"
                  class="post_cross_icon" (click)="deleteS3File(img.name, i, 'IMAGE')"><i class="fas fa-times-circle"></i></div>
                <div class="post_cross_icon"
                  *ngIf="img.name.split('.').pop()=='wmv' || img.name.split('.').pop()=='mov' || img.name.split('.').pop()=='mp4'"
                  (click)="deleteS3File(img.name, i, 'VIDEO')"><i class="fas fa-times-circle"></i></div>
                <div
                  *ngIf="img.name.split('.').pop()=='jpg' || img.name.split('.').pop()=='png' || img.name.split('.').pop()=='gif' || img.name.split('.').pop()=='jpeg'">
                  <img [src]="img.name" />
                </div>
                <div
                  *ngIf="img.name.split('.').pop()=='wmv' || img.name.split('.').pop()=='mov' || img.name.split('.').pop()=='mp4'">
                  <video [src]="img.name" alt="" height="100%" width="100%" controls
                    autoplay></video></div>
              </ng-template>
            </owl-carousel-o>
          </div>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <div class="col-sm-6 d-flex p-l-0 p-r-0">
        <span>
          <div class="cus-upload-icon">
            <input required type="file" (click)="InputFiled.value = null" #InputFiled class="fa fa-picture-o"
              (change)="uploadS3File($event)" multiple accept="image/*" />
            <span><i class="fa fa-picture-o" aria-hidden="true"></i></span>
          </div>
        </span>
        <span>
          <div class="cus-upload-icon">
            <input required type="file" class="fa fa-play" (click)="InputFileds.value = null" #InputFileds
              (change)="uploadS3File($event)" accept="video/*" />
            <span><i class="fa fa-play" aria-hidden="true"></i></span>
          </div>
        </span>
      </div>
      <div class="col-sm-6 text-right p-l-0 p-r-0">
        <span class="btn common-btn" (click)="this.dialogRef.close()">{{ 'buttons.cancel' | translate }}</span> <button
          type="submit" class="btn common-btn ml-2">{{ 'buttons.post' | translate }}</button>
      </div>
    </div>
  </form>
</div>
<app-s3Bucket [updateFiles]="filesForS3" (newItemEvent)="showS3FileData($event)"></app-s3Bucket>