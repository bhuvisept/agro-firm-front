<ngx-spinner bdColor="rgba(0, 0, 0, 0.5)" template="<img src='assets/loader/therataploader.gif' />"></ngx-spinner>
<h3 mat-dialog-title class="cus-color p-0">Ticket Details</h3>
<div >
  <div class="col-sm-12 book-appointement">
    <div class="d-flex flex-wrap">
      <div class="col-12 px-4">
        <strong>Subject</strong>
         <div>
           {{subject }}
         </div>
       </div>
       <div class="border-top border-bottom px-2 py-3 mx-3 w-100 mt-3 d-flex justify-content-between" >
         <div>
           <strong>Status</strong>
          <div >
            {{ ticketInformation.status | titlecase}}
          </div>
         </div>
         <div>
           <strong>Priority</strong>
          <div>
            {{priority || 'N/A' }}
          </div>
         </div>
        </div>
 
        <div class="w-100 border-bottom mx-3 p-2 mt-2 pb-3">
         <strong>Description</strong>
          <div >
             <span ReadMoreLess [text]="notes"  [maxLength]="200">  </span>
          </div>
        </div>
      <!-- <div class="col-sm-7 p-l-1 p-r-1 m-t-1" id="customSize">
        <mat-form-field class="example-full-width" appearance="outline">
          <mat-label>Subject</mat-label>
          <input matInput [(ngModel)]="subject" readonly autocomplete="off" />
        </mat-form-field>
      </div>
      <div class="col-sm-5 p-l-1 p-r-1 m-t-1">
        <mat-form-field class="example-full-width" appearance="outline">
          <mat-label >Select Priority</mat-label>
          <mat-select [(ngModel)]="priority" disabled style="font-size: 13px !important;">
            <mat-option [value]="priority">{{ priority | titlecase}}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div class="col-sm-12 p-l-1 p-r-1 mt-3">
        <label > Description</label>
        <ckeditor  [editor]="Editor" (ready)="editorsReady($event)" [config]="optionsNews" [(ngModel)]="notes" required  id="dynamicEditor" style="border: none" ></ckeditor> 
      </div> -->

      <div class="d-flex col-sm-2 px-2 m-t-1 pt05" style="padding-left: 5px" *ngFor="let item of ticketInformation?.attachments">
          <a *ngIf="item" target="_blank" [href]="attachmentUrlPath + item" [download]="item">
            <!-- <i *ngIf="item.split('.').pop() !== 'jpg' && item.split('.').pop() !== 'jpeg' && item.split('.').pop() !== 'png' && item.split('.').pop() == 'mp4' && item.split('.').pop() == 'wmv' && item.split('.').pop() == 'mov'" class="fa fa-file-pdf-o mr-2" style="font-size: 45px; color: #18568a"></i> -->
            <i *ngIf="item.split('.').pop() !== 'jpg' && item.split('.').pop() !== 'jpeg' && item.split('.').pop() !== 'png' && item.split('.').pop() !== 'mp4' && item.split('.').pop() !== 'wmv' && item.split('.').pop() !== 'mov'" class="fa fa-file-pdf-o mr-2" style="font-size: 100px; color: #18568a"></i>
              <div class="mr-2" *ngIf="item.split('.').pop() == 'jpg' || item.split('.').pop() == 'jpeg' || item.split('.').pop() == 'png'"> <img [src]="attachmentUrlPath+item" alt="" height="100px" width="100px"> </div>
          
              <div class="mr-2" *ngIf="item.split('.').pop() == 'mp4' || item.split('.').pop() == 'wmv' || item.split('.').pop() == 'mov'"> <video [src]="attachmentUrlPath+item" alt="" height="100px" width="100px" autoplay controls> </video> </div>

            </a>
      </div>
  <!-- comment priview box code started-->
  <div class="container px-0 mt-4">
    <div class="d-flex justify-content-start row">
      <div class="col-12">
              <div class="mb-3">Replies</div>
                <div class="p-2" style="border: 1px solid grey; border-radius: 10px;">
                  <div class="d-flex flex-column comment-section p-1" id="comment"
               >
                    <div class="bg-white p-2" *ngFor="let item of ticketInformation?.replies">
                        <div class="d-flex flex-row user-info">
                          <!-- <img class="rounded-circle" src="assets/Truck-banne-profile.png" width="40"> -->
                            <div class="d-flex flex-column justify-content-start ml-2"><span class="d-block font-weight-bold name">{{item?.createdByData?.firstName}} {{item?.createdByData?.lastName}}</span><span style="font-size: 11px;" class=" text-black-50"> <span style="font-size: 12px; color: black;">Created At :-</span> {{item.createdAt | date:'MMM d, y h:mm:ss a'}}</span></div>
                        </div>
                        <div class="mt-2">
                            <p style="font-size: 12px;" [innerHTML]="item?.reply"></p>
                        </div>
                    </div>
                    <div class="bg-light p-2">
                        <div class="d-flex flex-row align-items-start">
                          <!-- <img class="rounded-circle" src="assets/Truck-banne-profile.png" width="40"> -->
                          <textarea style="resize: none;" class="form-control ml-1 shadow-none textarea" placeholder="Enter text" [(ngModel)]="replyMessage"></textarea>
                        </div>
                        <div class="mt-2 text-right">
                          <button class="btn btn-primary btn-sm shadow-none" type="button" [disabled]="callApiOneTime" (click)="sendReply()">Reply</button>
                          <button class="btn btn-outline-primary btn-sm ml-1 shadow-none" type="button" *ngIf="replyMessage!==''" (click)="replyMessage=''">Cancel</button></div>
                    </div>
                </div>
                </div>
            </div>
        </div>
    </div>
  <!-- comment priview box code end-->

    </div>
    <div class="col-sm-12 text-center my-3">
      <button mat-dialog-close class="btn mt-0">Close</button>
    </div>
  </div>
</div>
