


 <ngx-spinner class="cusSpinner">
  <div class="loader-wrapper">
      <div class="truck-wrapper">
      <div class="truck">
          <div class="truck-container"></div>
          <div class="glases"></div>
          <div class="bonet"></div>
          <div class="base"></div>
          <div class="base-aux"></div>
          <div class="wheel-back"></div>
          <div class="wheel-front"></div>
          <div class="smoke"></div>
      </div>
      </div>
  </div>
</ngx-spinner>
<section class="trip-planned cus-round-with-bg">
  <div class="row m-3 p-3">
    <div class="col-6">
      <h4 class="text-left mt-3">{{ 'my_tickets.heading' | translate}}</h4>
    </div>
    <div class="text-right col-6">
      <!-- <button class="btn common-btn mt-3" [routerLink]="['/layout/myaccount/manage-truck/add-truck']"><i class="fa fa-plus"></i> Add Vehicle</button> -->

      <button class="btn common-btn mt-3" (click)="addTicketDialog()"><i class="fa fa-plus" ></i> {{ 'buttons.add_ticket' | translate}} </button>
    </div>
    <div class="modal-header col-sm-12" style="padding: 0rem !important">
      <div class="text-right col-sm-12 pb-2">
        <div class="cus-search-input row search-filter-mobile">
          <div class="col-sm-4 pr-sm-0 in-half  wt-100-on-mobile mr-2" *ngIf="userInfo?.userInfo?.accessLevel=='COMPANY' || userInfo?.userInfo?.accessLevel=='SELLER'">
            <mat-form-field>
              <div class="cus-search-dropown">
                <mat-select [(ngModel)]="tab" placeholder="Select list type" (selectionChange)="getTicketList(1)">
                  <mat-option *ngFor="let list of statusArray" [value]="list.value">
                    {{ list?.name }}
                  </mat-option>
                </mat-select>
              </div>
            </mat-form-field>
          </div>
          <div class="col-sm-6 cus-search-input mt-sm-4 pl-0 mob-pl-0">
            <input matInput placeholder="Enter name " [(ngModel)]="search" autocomplete="off" class="main" maxlength="30" />
            <div class="cus-search-input wt-100-on-mobile-btn">
              <button type="button" class="btn" title="Search" (click)="getTicketList(1)"><i class="fa fa-search"></i></button>
              <button (click)="reset()" class="btn btn-res" label="Reset" title="Reset"><i class="fa fa-refresh" title="reset"></i></button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="modal-body col-sm-12">
      <table class="table table-bordered">
        <thead>
          <tr class="text-center">
            <th  width="20%">{{ 'my_tickets.ticket_id' | translate}}</th>
            <!-- <th >{{ 'my_tickets.name' | translate}}</th> -->
            <th  width="40%">{{ 'my_tickets.subject' | translate}}</th>
            <th   width="20%">{{ 'my_tickets.created_by' | translate}}</th>
            <th  width="10%">{{ 'my_tickets.status' | translate}}</th>
            <th  width="10%">{{ 'my_tickets.action' | translate}}</th>
          </tr>
        </thead>
        <tbody>
          
          <tr *ngFor="let item of ticketList |  paginate: { itemsPerPage: itemsPerPage, currentPage: page, totalItems: totalCount }; let i = index" class="text-center">
            <td >{{ item?.ticketId }}</td>
            <!-- <td >{{ item?.reportedBy }}</td> -->
            <td >{{ item?.subject | slice:0:100 }}  <span *ngIf="item.subject.length >100">...</span>  </td>
            <td >{{ item?.createdby }}</td>
            <td >{{ item?.status }}</td>
            <td>
              <div class="fa">
                <i class="fas fa-eye fa-lg view" title="view" (click)="viewTicket(item)"></i>
              </div>
            </td>
        
          </tr>
        </tbody>
      </table>



      <div class=" mt-3">
        <div class="col-md-12 noInfo" *ngIf="!ticketList.length">
          <p class="text-center"> {{ 'No_Records_Found' | translate}} </p>
        </div>
        <div class="col-md-8 m-auto text-center mt-3" *ngIf="ticketList.length && totalCount > itemsPerPage">
          <pagination-controls (pageChange)="getTicketList($event)" autoHide="true" responsive="true" directionLinks="true"></pagination-controls>  
        </div>
      </div>
    </div>
  </div>
</section>
