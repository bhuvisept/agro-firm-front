<!-- <ngx-spinner class="cusSpinner">
  <div class="loader-wrapper">
    <div class="truck-wrapper">
      <div class="truck">
        <div class="truck-container"></div>
        <div class="glases"></div>
        <div class="bonet"></div>
        <div class="base"></div>
        <div class="base-aux"></div>
        <div class="wheel-back"></div>
        <div class="wheel-front"></div>
        <div class="smoke"></div>
      </div>
    </div></div
></ngx-spinner>
<form [formGroup]="createPostForm" (ngSubmit)="onSubmitCreatePostForm()" class="">
  <div class="modal-header p-0">
    <h4 class="modal-title mfont">{{ 'myNetwork.Create_post' | translate }}</h4>
    <button type="button" class="close cus-close-post" (click)="onNoClick()">&times;</button>
  </div>
  <div class="modal-body pl-0 pr-0">
    <div class="row cus_pop_Profile">
      <span class="col-sm-2 col-xs-2 p-0">
        <div *ngIf="ROLETITLE == 'COMPANY'">
          <img *ngIf="userObj.userInfo.image" src="{{ profile + userObj.userInfo.image }}" class="cus-round-with-img" />
          <img *ngIf="!userObj.userInfo.image" src="assets/Truck-banne-profile.png" class="cus-round-with-img" />
        </div>
        <div *ngIf="ROLETITLE == 'ENDUSER'">
          <img *ngIf="userObj.userInfo.image" src="{{ profile + userObj.userInfo.image }}" class="cus-round-with-img" />
          <img *ngIf="!userObj.userInfo.image" src="assets/Truck-banne-profile.png" class="cus-round-with-img" /></div
      ></span>
      <span class="col-sm-6 col-xs-2 p-l-0 mt-2">
        <h6 class="font-weight-bold pt-2">{{ userName | titlecase }}</h6>
      </span>
    </div>
    <section>
      <div class="col-sm-12 p-l-0 p-r-0 mt-5">
        <textarea
          matInput
          formControlName="caption"
          class="cus-post-textarea"
          placeholder="{{ 'myNetwork.what_talk' | translate }}"
          id="autoresizing"
          style="max-height: 120px !important"
          class="text-design"
        ></textarea>
        <mat-error *ngIf="!createPostForm.controls['caption'].dirty && createPostForm.controls['caption'].invalid && createPostForm.controls['caption'].touched"> Please enter caption </mat-error>
        <div *ngIf="this.createPostForm.value.caption?.length > 3000">
          <mat-error *ngIf="this.createPostForm.value.caption?.length > 3000" class="w-100">Maximum character limit 3000 </mat-error>
          <span class="text-danger" style="float: right; margin-right: 31px">{{ this.createPostForm.value.caption?.length }}</span>
        </div>
      </div>
      <div class="col-sm-12 p0 mt-3" *ngIf="filesImg">
        <owl-carousel-o [options]="customOptions" class="cus-event-slider">
          <ng-template carouselSlide *ngFor="let img of filesImg">
            <div class="post_cross_icon" (click)="deleteImageFile(img)" *ngIf="img.type == 'IMAGE'"><i class="fas fa-times-circle"></i></div>
            <div class="post_cross_icon" (click)="deleteVideoFile(img)" *ngIf="img.type == 'VIDEO'"><i class="fas fa-times-circle"></i></div>
            <div *ngIf="img.type == 'IMAGE'"><img src="{{ productImgPath + img.name }}" /></div>
            <div *ngIf="img.type == 'VIDEO'"><video src="{{ postVideo_path + img.name }}" alt="" height="100%" width="100%" controls autoplay></video></div
          ></ng-template>
        </owl-carousel-o>
      </div>
    </section>
  </div>
  <div class="modal-footer pl-0 pr-0">
    <div class="col-sm-6 d-flex p-l-0 p-r-0">
      <span>
        <div class="cus-upload-icon">
          <input required type="file" (click)="InputFile.value = null" #InputFile class="1" (change)="uploadPostImage($event)" multiple accept="image/*" />
          <span><i class="fa fa-picture-o" aria-hidden="true"></i></span></div
      ></span>
      <span style="cursor: pointer">
        <div class="cus-upload-icon">
          <input required type="file" (change)="uploadPostVideo($event)" (click)="InputFiles.value = null" #InputFiles accept="video/*" />
          <span><i class="fa fa-play" aria-hidden="true"></i></span></div
      ></span>
    </div>
    <div class="col-sm-6 text-right p-l-0 p-r-0">
      <button type="submit" class="btn common-btn" [disabled]="this.createPostForm.value.caption?.length > 3000 || loading || !createPostForm.value.caption?.trim()">
        {{ 'buttons.post' | translate }}<i *ngIf="loading" class="fa fa-circle-o-notch fa-spin cu-fa-wt loader-color"></i>
      </button>
    </div>
  </div>
</form>
<label class="btn btn-default">
  <input type="file" (change)="selectFile($event)">
</label>
<button class="btn btn-success"  (click)="uploadFile()">Upload</button> 
<img *ngFor="let item of imageUrl" [src]="item" class="cus-round-with-img" /> -->







<ngx-spinner class="cusSpinner">
  <div class="loader-wrapper">
    <div class="truck-wrapper">
      <div class="truck">
        <div class="truck-container"></div>
        <div class="glases"></div>
        <div class="bonet"></div>
        <div class="base"></div>
        <div class="base-aux"></div>
        <div class="wheel-back"></div>
        <div class="wheel-front"></div>
        <div class="smoke"></div>
      </div>
    </div>
  </div>
</ngx-spinner>
<form [formGroup]="createPostForm" (ngSubmit)="onSubmitCreatePostForm()" class="">
  <div class="modal-header p-0">
    <h4 class="modal-title mfont">{{ 'myNetwork.Create_post' | translate }}</h4>
    <button type="button" class="close cus-close-post" (click)="currentDialogRef.close()">&times;</button>
  </div>
  <div class="modal-body pl-0 pr-0">
    <div class="row cus_pop_Profile">
      <span class="col-sm-2 col-xs-2 p-0">
        <div *ngIf="ROLETITLE == 'COMPANY'">
          <img *ngIf="userObj.userInfo.image" src="{{ profile + userObj.userInfo.image }}" class="cus-round-with-img" />
          <img *ngIf="!userObj.userInfo.image" src="assets/Truck-banne-profile.png" class="cus-round-with-img" />
        </div>
        <div *ngIf="ROLETITLE == 'ENDUSER'">
          <img *ngIf="userObj.userInfo.image" src="{{ profile + userObj.userInfo.image }}" class="cus-round-with-img" />
          <img *ngIf="!userObj.userInfo.image" src="assets/Truck-banne-profile.png" class="cus-round-with-img" />
        </div>
      </span>
      <span class="col-sm-6 col-xs-2 p-l-0 mt-2">
        <h6 class="font-weight-bold pt-2">{{ userName | titlecase }}</h6>
      </span>
    </div>
    <section>
      <div class="col-sm-12 p-l-0 p-r-0 mt-5">
        <textarea matInput formControlName="caption" class="cus-post-textarea"
          placeholder="{{ 'myNetwork.what_talk' | translate }}" id="autoresizing" style="max-height: 120px !important"
          class="text-design"></textarea>
        <mat-error
          *ngIf="!createPostForm.controls['caption'].dirty && createPostForm.controls['caption'].invalid && createPostForm.controls['caption'].touched">
          Please enter caption </mat-error>
        <div *ngIf="this.createPostForm.value.caption?.length > 3000">
          <mat-error *ngIf="this.createPostForm.value.caption?.length > 3000" class="w-100">Maximum character limit 3000
          </mat-error>
          <span class="text-danger" style="float: right; margin-right: 31px">{{
            this.createPostForm.value.caption?.length }}</span>
        </div>
      </div>
      <div class="col-sm-12 p0 mt-3">
        <owl-carousel-o [options]="customOptions" class="cus-event-slider">
          <ng-template carouselSlide *ngFor="let img of imageUrl; let i = index">
            <div class="post_cross_icon" (click)="deleteS3File(img.name, i, 'IMAGE')"
              *ngIf="img?.urlType == 'jpg' || img?.urlType == 'png' || img?.urlType == 'gif' || img?.urlType == 'jpeg'">
              <i class="fas fa-times-circle"></i>
            </div>
            <div class="post_cross_icon" (click)="deleteS3File(img.name, i, 'VIDEO')"
              *ngIf="img?.urlType == 'mp4' || img?.urlType == 'wmv' || img?.urlType == 'mov'">
              <i class="fas fa-times-circle"></i>
            </div>

            <div>
             <span *ngIf="img.name">
              <img
              *ngIf="img?.urlType == 'jpg' || img?.urlType == 'png' || img?.urlType == 'gif' || img?.urlType == 'jpeg'"
              [src]="img.name" />
             </span>
            </div>
            <div *ngIf="img?.urlType == 'mp4' || img?.urlType == 'wmv' || img?.urlType == 'mov'">
              <video [src]="img.name" alt="" height="100%" width="100%" controls autoplay></video>
            </div>
          </ng-template>
        
        </owl-carousel-o>
        <div class="d-flex justify-content-center align-items-center px-2 mt-1" *ngIf="isLoading==true">
          <mat-progress-bar class="example-margin" [color]="'primary'" [mode]="'indeterminate'"  #spinner>
          </mat-progress-bar>
        </div>
      </div>
   

      <!-- <div *ngIf="isLoading" class="mt-2 px-4">
        <mat-progress-bar #spinner mode="determinate" [value]="percentagevalue" ></mat-progress-bar>
        <div class="mt-1">{{spinner.value}}%</div>
      </div> -->


    </section>
  </div>
  <div class="modal-footer pl-0 pr-0">
    <div class="col-sm-6 d-flex p-l-0 p-r-0">
      <span>
        <div class="cus-upload-icon">
          <input required type="file" (click)="InputFile.value = null" #InputFile class="1"
            (change)="uploadS3File($event)" multiple accept="image/*" />
          <span><i class="fa fa-picture-o" aria-hidden="true"></i></span>
        </div>
      </span>
      <span style="cursor: pointer">
        <div class="cus-upload-icon">
          <input required type="file" name="file" id="file" (change)="uploadS3File($event)" (click)="InputFiles.value = null" #InputFiles
            accept="video/*" />
          <span><i class="fa fa-play" aria-hidden="true"></i></span>
        </div>
      </span>
    </div>
    <div class="col-sm-6 text-right p-l-0 p-r-0">
      <button type="submit" class="btn common-btn"
        [disabled]="this.createPostForm.value.caption?.length > 3000 || loading || !createPostForm.value.caption?.trim()">
        {{ 'buttons.post' | translate }}<i *ngIf="loading"
          class="fa fa-circle-o-notch fa-spin cu-fa-wt loader-color"></i>
      </button>
    </div>
  </div>
</form>
<app-s3Bucket [item]="filesForS3" (newItemEvent)="showS3FileData($event)"></app-s3Bucket>
